<head>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-tflite@0.0.1-alpha.6/dist/tf-tflite.min.js"></script>
</head>
<body>
<h1>hello </h1>

<img id="img" src="goal_test.png"/>

</body>
<script>

async function run(){
// Load the MobilenetV2 tflite model from tfhub.
const tfliteModel = await tflite.loadTFLiteModel('model_docks_v2_back.tflite');

const outputTensor = tf.tidy(() => {
    // Get pixels data from an image.
    const img = tf.browser.fromPixels(document.getElementById('img'));
    // Normalize (might also do resize here if necessary).
    const resized = tf.image.resizeBilinear(img, [192, 192]);

    const input = tf.cast(tf.expandDims(resized), 'int32');

    console.log('input', input.dataSync())
    // const input = tf.sub(tf.div(tf.expandDims(img), 127.5), 1);
    // Run the inference.
    let outputTensor = tfliteModel.predict(input);
    // De-normalize the result.     

    return outputTensor
  });

    // bboxes   
  console.log(outputTensor['TFLite_Detection_PostProcess'].dataSync())

    // classes   
  console.log(outputTensor['TFLite_Detection_PostProcess:1'].dataSync())

    // confidences   
  console.log(outputTensor['TFLite_Detection_PostProcess:2'].dataSync())
  console.log(outputTensor['TFLite_Detection_PostProcess:3'].dataSync())

// console.log(outputTensor)
}

run()

</script>
